# -*- mode: sh; sh-set-shell: zsh -*-
# vim: ft=zsh

source "${HOME}/.shtils"

manual_pathmunge "/usr/local/man" before

export XDG_CONFIG_HOME=${XDG_CONFIG_HOME:-$HOME/.config}
export XDG_DATA_HOME=${XDG_DATA_HOME:-$HOME/.local/share}
export ZDOTDIR=${ZDOTDIR:-$XDG_CONFIG_HOME/zsh}

# zsh-snap configuration
export ZNAP_HOME="${XDG_DATA_HOME}/zsh-snap"
[[ ! -d "$ZNAP_HOME" ]] && mkdir -p "$ZNAP_HOME"

# Lang stuff
export LANG=en_US.UTF-8
export LANGUAGE=en_US
export LC_ALL=en_US.UTF-8
export LC_MONETARY=en_FI.UTF-8
export LC_TIME=en_FI.UTF-8

export CLICOLOR=1
export VISUAL="nvim --cmd 'let g:flatten_wait=1'"
export EDITOR="nvim"

# meincodex directories (no command dependencies)
meincodex_dir="${HOME}/meincodex"
if [[ -d "$meincodex_dir" ]]; then
  export MEINCODEX_DIR="$meincodex_dir"
  for dir_info in \
    "NOTIZEN_DIR:${MEINCODEX_DIR}/notizen" \
    "CODEBASIS_DIR:${MEINCODEX_DIR}/codebasis" \
    "CODESCHNIPSEL_DIR:${MEINCODEX_DIR}/codeschnipsel"
  do
    var_name="${dir_info%:*}"
    dir_path="${dir_info#*:}"
    [[ -d "$dir_path" ]] && export "$var_name"="$dir_path"
  done
fi

{{ if eq .chezmoi.os "darwin" -}}
if [[ -S "${HOME}/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock" ]]; then
  export SSH_AUTH_SOCK="${HOME}/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
fi
{{ end -}}
